---
sidebar_position: 1
---

# Overview

PeopleData DID is an implementation DID. It relies on the W3C and DIF recommendations on DID and Vreifiable Credentials data model. 

The overview of DID architecture and the relationship of the basic components illustrated as below:
![](./img/did_detailed_architecture_overview.svg)


## Architectural Considerations

![](./img/did_detailed_architecture_overview.svg)

### 1. Creation of a DID

The creation of a DID is a process that is defined by each DID Method. Some DID Methods, such as did:key, are purely generative, such that a DID and a DID document are generated by transforming a single piece of cryptographic material into a conformant representation. Other DID methods might require the use of a verifiable data registry, where the DID and DID document are recognized to exist by third parties only when the registration has been completed, as defined by the respective DID method. Other processes might be defined by the respective DID method.

### 2. Determining the DID subject

A DID is a specific type of URI (Uniform Resource Identifier), so a DID can refer to any resource. Per [RFC3986]:

the term "resource" is used in a general sense for whatever might be identified by a URI. [...] A resource is not necessarily accessible via the Internet.
Resources can be digital or physical, abstract or concrete. Any resource that can be assigned a URI can be assigned a DID. The resource referred to by the DID is the DID subject.

The DID controller determines the DID subject. It is not expected to be possible to determine the DID subject from looking at the DID itself, as DIDs are generally only meaningful to machines, not human. A DID is unlikely to contain any information about the DID subject, so further information about the DID subject is only discoverable by resolving the DID to the DID document, obtaining a verifiable credential about the DID, or via some other description of the DID.

While the value of the id property in the retrieved DID document must always match the DID being resolved, whether or not the actual resource to which the DID refers can change over time is dependent upon the DID method. For example, a DID method that permits the DID subject to change could be used to generate a DID for the current occupant of a particular role—such as the CEO of a company—where the actual person occupying the role can be different depending on when the DID is resolved.

### 3. Referring to the DID document

The DID refers to the DID subject and resolves to the DID document (by following the protocol specified by the DID method). The DID document is not a separate resource from the DID subject and does not have a URI separate from the DID. Rather the DID document is an artifact of DID resolution controlled by the DID controller for the purpose of describing the DID subject.

This distinction is illustrated by the graph model shown below.
![](./img/figure-a.1-did-and-did-document-graph.svg)

A DID is an identifier assigned by a DID controller to refer to a DID subject and resolve to a DID document that describes the DID subject. The DID document is an artifact of DID resolution and not a separate resource distinct from the DID subject. See also: narrative description.

### 4. Statements in the DID document

Each property in a DID document is a statement by the DID controller that describes:

The string of characters defining identifiers for the DID subject (e.g., the id and alsoKnownAs properties)
How to interact with the DID subject (e.g., the verificationMethod and service properties).
How to interpret the specific representation of the DID document (e.g., the @context property for a JSON-LD representation).
The only required property in a DID document is id, so that is the only statement guaranteed to be in a DID document. That statement is illustrated in Figure (above) with a direct link between the DID and the DID subject.



### 5. Discovering more information about the DID subject

Options for discovering more information about the DID subject depend on the properties present in the DID document. If the service property is present, more information can be requested from a service endpoint. For example, by querying a service endpoint that supports verifiable credentials for one or more claims (attributes) describing the DID subject.

Another option is to use the alsoKnownAs property if it is present in the DID document. The DID controller can use it to provide a list of other URIs (including other DIDs) that refer to the same DID subject. Resolving or dereferencing these URIs might yield other descriptions or representations of the DID subject as illustrated in the figure below.

![](./img/figure-a.2-also-known-as-graph.svg)
 A DID document can use the alsoKnownAs property to assert that another URI (including, but not necessarily, another DID) refers to the same DID subject. See also: narrative description.

### 6. Serving a representation of the DID subject

If the DID subject is a digital resource that can be retrieved from the internet, a DID method can choose to construct a DID URL which returns a representation of the DID subject itself. For example, a data schema that needs a persistent, cryptographically verifiable identifier could be assigned a DID, and passing a specified DID parameter (see 3.2.1 DID Parameters) could be used as a standard way to retrieve a representation of that schema.

Similarly, a DID can be used to refer to a digital resource (such as an image) that can be returned directly from a verifiable data registry if that functionality is supported by the applicable DID method.


### 7. Assigning DIDs to existing web resources

If the controller of a web page or any other web resource wants to assign it a persistent, cryptographically verifiable identifier, the controller can give it a DID. For example, the author of a blog hosted by a blog hosting company (under that hosting company's domain) could create a DID for the blog. In the DID document, the author can include the alsoKnownAs property pointing to the current URL of the blog, e.g.:

"alsoKnownAs": ["https://myblog.blogging-host.example/home"]
If the author subsequently moves the blog to a different hosting company (or to the author's own domain), the author can update the DID document to point to the new URL for the blog, e.g.:

"alsoKnownAs": ["https://myblog.example/"]
The DID effectively adds a layer of indirection for the blog URL. This layer of indirection is under the control of the author instead of under the control of an external administrative authority such as the blog hosting company. This is how a DID can effectively function as an enhanced URN (Uniform Resource Name)—a persistent identifier for an information resource whose network location might change over time.

### 8. he relationship between DID controllers and DID subjects

To avoid confusion, it is helpful to classify DID subjects into two disjoint sets based on their relationship to the DID controller.

#### 8.1 Set #1: The DID subject is the DID controller
The first case, shown in Figure 10, is the common scenario where the DID subject is also the DID controller. This is the case when an individual or organization creates a DID to self-identify.

![](./img/figure-b.1-controller-and-subject-equivalence.svg)

From a graph model perspective, even though the nodes identified as the DID controller and DID subject in Figure above are distinct, there is a logical arc connecting them to express a semantic equivalence relationship.

#### 8.2 Set #2: The DID subject is not the DID controller
The second case is when the DID subject is a separate entity from the DID controller. This is the case when, for example, a parent creates and maintains control of a DID for a child; a corporation creates and maintains control of a DID for a subsidiary; or a manufacturer creates and maintains control of a DID for a product, an IoT device, or a digital file.

From a graph model perspective, the only difference from Set 1 that there is no equivalence arc relationship between the DID subject and DID controller nodes.

### 9. Multiple DID controllers

A DID document might have more than one DID controller. This can happen in one of two ways.

#### 9.1 Independent Control
In this case, each of the DID controllers might act on its own, i.e., each one has full power to update the DID document independently. From a graph model perspective, in this configuration:

- Each additional DID controller is another distinct graph node (which might be identified by its own DID).
- The same arcs ("controls" and "controller") exist between each DID controller and the DID document.

![](./img/figure-c.1-independent-did-controllers.svg)

#### 9.2 Group Control
In the case of group control, the DID controllers are expected to act together in some fashion, such as when using a cryptographic algorithm that requires multiple digital signatures ("multi-sig") or a threshold number of digital signatures ("m-of-n"). From a functional standpoint, this option is similar to a single DID controller because, although each of the DID controllers in the DID controller group has its own graph node, the actual control collapses into a single logical graph node representing the DID controller group as shown in Figure below.

![](./img/figure-c.2-group-did-controllers.svg)

### 10. Change the DID subject

A DID document has exactly one DID which refers to the DID subject. The DID is expressed as the value of the id property. This property value is immutable for the lifetime of the DID document.

However, it is possible that the resource identified by the DID, the DID subject, may change over time. This is under the exclusive authority of the DID controller. For more details, see section 9.16 Persistence.

### 11. Changing the DID controller

The DID controller for a DID document might change over time. However, depending on how it is implemented, a change in the DID controller might not be made apparent by changes to the DID document itself. For example, if the change is implemented through a shift in ownership of the underlying cryptographic keys or other controls used for one or more of the verification methods in the DID document, it might be indistinguishable from a standard key rotation.

On the other hand, if the change is implemented by changing the value of the controller property, it will be transparent.

If it is important to verify a change of DID controller, implementers are advised to authenticate the new DID controller against the verification methods in the revised DID document.



## Architectural Implenmentations

The architecture of the DID implenmentations is various by different provider, there are some illustrates as below:

1. Use Ethereum Node
![](./img/did-arch-En.png)

2. AWS Architecture
This picture illustrates the AWS architecture for hosting the Universal resolver as well as the traffic-flow through the system.

![](./img/aws-architecture.png)

The entry-point to the system is the public Internet facing Application Load Balancer (ALB), that sits at the edge of the AWS cloud and is bound to the DNS name `“dev.uniresolver.io”`. When resolving DIDs the traffic flows through the ALB to the resolver. Based on the configuration of each DID-method the resolver calls the corresponding DID-driver (typical scenario) or may call another HTTP endpoint (another resolver or directly the DLT if HTTP is supported). In order to gain performance, blockchain nodes may also be added to the deployment, as sketched at Driver C.

The Kubernetes cluster is spanned across multiple `Availability Zones (AZ)`, which are essential parts for providing fault-tolerance and achieving a high-availability HA of the system. This means that no downtime is to be expected in case of failing parts of the system, as the healthy parts will take over operations reliably.

If containers, like DID-Drivers, are added or removed, the ALB ingress controller https://kubernetes-sigs.github.io/aws-alb-ingress-controller/ takes care of notifying the ALB. Due to this mechanism the ALB stays aware of the system state and is able to keep traffic-routes healthy. By use of https://github.com/kubernetes-sigs/external-dns the DNS Service Route 53 is updated. Further details regarding the automated system-update are described at CI-CD.

More details see [DIF Education](https://identity.foundation/education/) resources.

## The Layered Architecture

- Layer 1: DLT

`Peopledata-did` use `Ethereum` and `Quorum` as its DLT layer. And Distribution storage support `IPFS` and `peopleswarm` as DID documents storage. 

`@peopledata/registry-contract` using smart contarct to registry did and identifier operations. 

- Layer 2: DPKI(Decentralized PKI)  Network

`peopledata-resolver` as a middleware to bridge Layer 1 and Layer 3.


- Layer 3: Credential Exchange 

`Verixyz agent` provide DIDComm and credntials exchange between different apps.

![](./img/did-arch.png)




## The General Steps

- User create its owen DID from `verixyz client` app; 
- User can choose which VCs Issuer he should use; and then follow the Issuer's instruction;
- Issuer review user's files and issue VCs to User;
- User use ID login 3rd-App, and 3rd-App require VCs from User;
- User auth 3rd-App acquire VCs; 3rd-App verifiy the VCs ;
- User success login 3rd-App.
